<!DOCTYPE html>
<html>

<head>
    <title>摸鱼办</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/static/moyu.ico" type="image/x-icon">
    <link rel="stylesheet" href="/static/css/index-style.css">
    <script src="/static/js/tool.js"></script>
    <link href="https://cdn.bootcdn.net/ajax/libs/KaTeX/0.13.18/katex.min.css" rel="stylesheet">
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/avalon.js/2.2.7/avalon.min.js"></script>

</head>

<body for="html-export">
<div class="mume markdown-preview " ms-controller="moyu">
    <h1 align="center">摸鱼办公室</h1>
    <p align="center">
        <img src="/static/moyu.gif" alt="">
    </p>
    <center>
        摸鱼办提醒您: 今天是 {{ @today }} {{ @week_name }}
        <br><br>
        <p>
            你好，摸鱼人，工作再累，一定不要忘记摸鱼哦 ！<br>
            有事没事起身去茶水间冲个咖啡，去廊道去天台走走，别老在工位上坐着。<br>
            多喝点水，钱是老板的，但命是自己的 !
        </p>


        <p ms-for="(index,v) in @holiday">
            🐟 距离 {{ v.name }} 放假还有 {{ @v.day_num }} 天
        </p>


        <p>
            【友情提示】三甲医院 ICU 躺一天平均费用大概一万块。<br>
            你晚一天进 ICU，就等于为你的家庭多赚一万块。少上班，多摸鱼。<br>
            上班是帮老板赚钱，摸鱼是赚老板的钱！最后，祝愿天下所有摸鱼人，都能愉快的渡过每一天 !
        </p>


    </center>

    <br><br>
    <p align="right">摸鱼办 宣 </p>

</div>

<center>
    <!--    <a style="font-size: 14px;font-weight: 100;color: #aaa;" href="https://beian.miit.gov.cn/">备案信息</a>-->
</center>

<script>


    var vm = avalon.define({
        $id: "moyu",
        holiday: []
    })

    vm.now = new Date();
    vm.xq = vm.now.getDay(), h = vm.now.getHours(), m = vm.now.getMinutes(),
        vm.sj = (h < 10 ? '0' : '') + h + ':' + (m < 10 ? '0' : '') + m;
    vm.week_name = toWeekName(vm.now.format("yyyy-MM-dd"));
    vm.today = vm.now.format("yyyy") + "年" + vm.now.format("MM") + "月" + vm.now.format("dd") + "日  ";
    vm.work_time = vm.xq >= 1 && vm.xq <= 5 && vm.sj >= '09:00' && vm.sj <= '18:00';


    function calc_date(datetime) {
        var now = new Date();
        var endtime = new Date(datetime);

        // //赋值
        var day = (endtime - now) / 1000 / 60 / 60 / 24;
        var hour = parseFloat("0." + (day + "").split('.')[1]) * 24;
        var minu = parseFloat("0." + (hour + "").split('.')[1]) * 60;
        var sec = parseFloat("0." + (minu + "").split('.')[1].substring(0, 4)) * 60;

        day = parseInt(day);
        hour = parseInt(hour);
        minu = parseInt(minu);
        sec = parseInt(sec);

        return day;

    }

    $.ajax({
        url: "data/holiday.json",
        type: 'GET',
        datatype: 'JSON',
        success: function (req_data) {
            console.log(req_data);
            vm.holiday = req_data.data.map(function (_holiday) {
                _holiday.day_num = calc_date(_holiday.datetime);
                return _holiday;
            });
        },
        error: function (err) {
            $("h3").text("数据异常");
            return;
        }

    });

</script>
</body>

</html>
